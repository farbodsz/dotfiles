#!/usr/bin/env bash
# Prints the volume percentage with a speaker emoji

# Outputs something like: "Front Right: Playback 29113 44% off"
volinfo=$(amixer -D pulse sget Master | tail -n 1 | sed 's/\[//g; s/\]//g')

if [ -z "$volinfo" ]; then
  echo "âŒ ERR"
else
  if [ "$(echo $volinfo | awk '{print $6}')" = "off" ]; then
    echo "ğŸ”‡ MUTE"
  else
    # Volume percentage
    vol=$(echo $volinfo | awk '{print $5}')

    case "$vol" in
      [0-2][0-9]) echo "ğŸ”ˆ $vol" ;;
      [3-6]*) echo "ğŸ”‰ $vol" ;;
      [7-9]*) echo "ğŸ”Š $vol" ;;
      [100]*) echo "ğŸ”Š $vol" ;;
      *) echo "âŒ ERR" ;;
    esac
  fi
fi
